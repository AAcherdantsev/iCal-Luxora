<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="iCal.Luxora.Application.UI.Components.Icons.Icon"
             HeightRequest="{Binding Source={RelativeSource Self}, Path=WidthRequest}"
             x:Name="This">

    <ContentView.Resources>
        <ResourceDictionary>
            <toolkit:MathExpressionConverter x:Key="MathExpressionConverter" />
        </ResourceDictionary>
    </ContentView.Resources>

    <Grid WidthRequest="{Binding WidthRequest}"
          BindingContext="{x:Reference This}"
          HeightRequest="{Binding Source={RelativeSource Self}, Path=WidthRequest}">

        <Ellipse StrokeThickness="1">
            <Ellipse.Fill>
                <SolidColorBrush Color="{Binding Path=BackgroundColor}" />
            </Ellipse.Fill>

            <Ellipse.Stroke>
                <SolidColorBrush Color="{Binding Path=StrokeColor}" />
            </Ellipse.Stroke>
        </Ellipse>

        <Image Margin="{Binding Width, Converter={StaticResource MathExpressionConverter}, ConverterParameter='x/8'}"
               Source="{Binding Path=Source}">
            <Image.Behaviors>
                <toolkit:IconTintColorBehavior TintColor="{Binding Path=IconColor}"
                                               BindingContext="{x:Reference This}" />
            </Image.Behaviors>
        </Image>

    </Grid>
</ContentView>